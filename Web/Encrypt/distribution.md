## **秘钥分发使用机制**

### **A. 密钥分发**
- 采用对称加密算法进行保密通信，需要共享同一密钥。通常是系统中的一个成员先选择一个秘密密钥，然后将它传送另一个成员或别的成员。
- X9.17标准描述了两种密钥：密钥加密密钥和数据密钥。
- **密钥加密密钥加密其它需要分发的密钥；而数据密钥只对信息流进行加密。**
- 密钥加密密钥一般通过手工分发。为增强保密性，也可以将密钥分成许多不同的部分然后用不同的信道发送出去。

### **B. 更新密钥**
- 当密钥需要频繁的改变时，频繁进行新的密钥分发的确是困难的事，一种更容易的解决办法是从旧的密钥中产生新的密钥，有时称为密钥更新。
- 可以使用单向函数进行更新密钥。如果双方共享同一密钥，并用同一个单向函数进行操作，就会得到相同的结果。

### **C. 密钥存储**
- 密钥可以存储在脑子、磁条卡、智能卡中。也可以把密钥平分成两部分，一半存入终端一半存入ROM密钥。
- 还可采用类似于密钥加密密钥的方法对难以记忆的密钥进行加密保存。

### **D. 备份密钥**
> **密钥的备份可以采用密钥托管、秘密分割、秘密共享等方式。**

- **a. 密钥托管中心**
    1. **密钥托管中心**: 要求所有用户将自己的密钥交给密钥托管中心，由密钥托管中心备份保管密钥（如锁在某个地方的保险柜里或用主密钥对它们进行加密保存），一旦用户的密钥丢失（如用户遗忘了密钥或用户意外死亡），按照一定的规章制度，可从密钥托管中心索取该用户的密钥。
    2. **智能卡**: 作为临时密钥托管。如Alice把密钥存入智能卡，当Alice不在时就把它交给Bob，Bob可以利用该卡进行Alice的工作，当Alice回来后，Bob交还该卡，由于密钥存放在卡中，所以Bob不知道密钥是什么。

- **b. 秘密共享协议**
    1. 将密钥K分成n块，每部分叫做它的“影子”，知道任意m个或更多的块就能够计算出密钥K，知道任意m-1个或更少的块都不能够计算出密钥K，这叫做（m,n）门限（阈值）方案。目前，人们基于拉格朗日内插多项式法、射影几何、线性代数、孙子定理等提出了许多秘密共享方案。
    2. **秘密共享解决了两个问题：一是若密钥偶然或有意地被暴露，整个系统就易受攻击；二是若密钥丢失或损坏，系统中的所有信息就不能用了**

- **c. 秘密分割**
    1. 秘密分割把秘密分割成许多碎片，每一片本身并不代表什么，但把这些碎片放到一块，秘密就会重现出来。

### **E. 密钥有效期**
> **数据密钥的有效期主要依赖数据的价值和给定时间里加密数据的数量。价值与数据传送率越大所用的密钥更换越频繁。**
- **加密密钥不能无限期使用**: 密钥加密密钥无需频繁更换，因为它们只是偶尔地用作密钥交换。
- **不同密钥应有不同有效期**: 用来加密保存数据文件的加密密钥不能经常地变换。
    ```sh
    # 通常是每个文件用唯一的密钥加密，然后再用密钥加密密钥把所有密钥加密，密钥加密密钥要么被记忆下来，要么保存在一个安全地点。
    # 当然，丢失该密钥意味着丢失所有的文件加密密钥。
    # 
    ```
- **旧密钥仍需保密，以防用户需要验证从前的签名。但是新密钥将用作新文件签名，以减少密码分析者所能攻击的签名文件数目。**

### **F. 销毁密钥**
- 如果密钥必须替换，旧钥就必须销毁，密钥必须物理地销毁。

