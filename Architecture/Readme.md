## **架构简记**

### **一、需求分析**
> **没有需求分析，就没有业务架构。在业务架构过程中，需求分析至少应该花费三分之一以上的精力**
- **为何要做需求分析？**
    1. 做软件本身就是为了满足用户需求。那么，**用户需求到底为何，我们需要清楚定义**。
    2. 需求边界定义的需要。用户需求理清楚了，不代表产品理清楚了。用户需求的满足一定会有行业分工，我们做什么，合作伙伴做什么，需要**厘清大家的边界**。
    3. 架构需要切分子系统，需要我们梳理并对用户需求进行归纳与抽象。架构还需要防止过度设计，把简单的事情复杂化。但什么是过度设计？不会发生的事情你考虑了并且为它
        ```sh
        # 什么是过度设计？不会发生的事情你考虑了并且为它做足了准备，就是过度设计。
        # 所以判断是不是过度设计是很困难的，需要对需求未来演化有很强的判断力。
        ```
- **架构师为何要参与需求分析？**
    1. **用户需求的深层理解是很难传递的。**
    2. 产品设计过程需要架构师的深度参与，而不是单向的信息传递。

- **需求分析的内容？**
    1. 我们要面向的核心用户人群是谁？
    2. 用户原始需求是什么？
    3. 最核心问题是哪几个？
    4. 已经有哪些玩家在里面？
    5. 上下游有哪些类型的公司，在我们之前，用户是怎么解决他们的问题的？
    6. 我们的替换方案又是怎样的？进而，我们的产品创造的价值点是什么？
    7. 用户最关注的核心指标是什么？用户需求潜在的变化在哪些地方？

- **怎么做需求分析**
    1. 心态第一，心里得装着用户
    2. 对问题刨根究底，找到根源需求: **需求反馈已经属于二次加工的需求，而非原始需求**
    3. 在理清楚需求后，要对需求进行归纳整理: **在讨论需求的变化点和稳定点的时候，我们需要有明确参考的坐标系。在不同视角下，稳定点和变化点的判断是完全不同的**
        ```sh
        # a. 对变化点的梳理，是一次产品边界的确立过程。所谓的开放性设计，就是说我把这个功能交给了合作伙伴，但是我得考虑怎么和合作伙伴配合的问题。
        #       开放性设计并不是一个纯粹的用户需求问题，它通常涉及技术方案的探讨。【定义通信标准】
        #
        # b. 对变化点的梳理至关重要。产品功能必须是收敛的，必须是可完成的。
        #       如果某个子类别的需求呈现出发散而无法收敛的趋势，这个事情，团队一定要坐下来一起去反复推敲。
        #       不断拷问，不断明确响应需求的正确姿势到底为何。
        #
        # c. 产品边界的确立不是一个纯需求，也不是一个纯技术，而是两者合而为一的过程。
        #
        ```

- **产品定义**
    1. 首先，需要明确产品中有哪些元素，或者叫资源，以及这些资源的各类操作方式
    2. 其次，需要对产品如何满足用户需求进行确认。
    3. 最后，产品定义还需要考虑市场策略，我们的产品如何进入市场，和既有市场格局中的其他主流解决方案的关系是什么样的。

- **用思考的方式去记忆，而不是用记忆的方式去思考**

### **二、系统的概要设计**
> **【识别评判对象】(评判谁)：设计过程中各个层面考虑的出发点**
- 系统设计，简单来说就是 “对系统进行分解” 的能力。这个阶段核心要干的事情，就是明确子系统的职责边界和接口协议。
    1. 功能的使用界面（或者叫接口），应尽可能符合业务需求对它的自然预期。
    2. 功能的实现要高内聚，功能与功能之间的耦合尽可能低。
    3. 在软件系统中有多个层次的组织单元：子系统、模块、类、方法 / 函数。子系统如何分解模块？
    4. 模块如何分解到更具体的类或函数？每一层的分解方式，都遵循相同的套路。也就是分解系统的方法论。

> **【评判标准】(怎么评判)：更好的指导评判**  
- **分解系统优劣的评判标准**
    1. 功能的使用界面（或者叫接口），应尽可能符合业务需求对它的自然预期。
        ```sh
        # 类和函数是从语言级的函数调用来完成业务
        # 网络服务程序是通过网络 RPC 请求来完成业务
        # 桌面程序是通过用户交互来完成业务。【MVC】
        ```

    2. 功能的实现要高内聚，功能与功能之间的耦合尽可能低。
        ```sh
        # a. 代码高内聚的好处是，多大的团队协作都会很顺畅，代码提交基本上不怎么发生冲突。
        # b. 低耦合:实现某个功能所依赖的外部环境少，易于构建。
        #       功能实现的外部依赖分两种：
        #       一种是对业务无关的基础组件依赖。
        #       一种是对底层业务模块的依赖。
        ```

> **【怎么做？怎么去分解】：并不存在放之四海皆可用的办法**  
- **系统分解**    
    1. 系统分解首先要从需求归纳出发。用户需求分析清楚很重要。把需求功能点涉及的数据（对象）、操作接口理清楚，并归纳整理，把每个功能都归于某一类。  
    2. 把类与类的关系理清楚，做到逻辑上自洽，那么一个基本的系统框架就形成了。
    
- **系统的概要设计阶段**
    1. 以子系统为维度来阐述系统各个角色之间的关系。
    2. 焦点是整个系统如何被有效地串联起来。如果某个子系统不作进一步的分解也不会在项目上有什么风险，那么我们并不需要在这个阶段对其细化。
    3. 系统的概要设计阶段也应该有代码产出。
        ```sh 
        # a. 系统的初始框架代码。也就是说，系统的大体架子已经搭建起来了
        # b. 原型性的代码来验证。一些核心子系统在这个阶段提供了 mock 的系统。【关注了全局系统性风险的消除，并且给了每个子系统或模块的负责人一个更具象且确定性的认知。】
        ```
    































