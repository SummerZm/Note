## **工作中的设计问题**

### **关于获取系统版本问题**
- **现状：读系统版本问题在android是build.prop属性读不到，就用uname命令读，读不到再去/proc/cmdline中解析**
    ```sh
    # 优点：多备份机制
    # 缺点：
    #   a. 增加代码复杂度,代码量多更容易藏问题
    #   b. 上层软件多路径获取信息，增加了出问题排查的难度
    #   c. 下层软件多途径提供信息也有类似的问题
    #  
    # 思考: 以上缺点基于：经常出现问题的场景，但我们做了多途径备份，出问题的概率属于极少数，所以缺点不明显
    #   a. 因为代码量多更容易藏问题，所以多途径备份看似提高了容错率，事实上也带入隐藏了潜在问题
    #   b. 单点获取可以有时间写出高效，稳定，简洁的代码；这不也是从另一角度，降低了风险吗？
    #   
    # 这是代码设计的颗粒度控制问题
    ```

### **关于配置同步的一些问题**
- 应用场景：服务器修改底下设备配置项。服务器和设备均有自身一套接口
    1. 方案1: 【传输方式：mqtt[udp] + tls 建立加密透传通信通道  S --> C】服务器通过Mqtt批量修改设备的配置。
    2. 方案2: 【单向同步：设备本地数据和服务器库数据  C --> S】 在1的基础上添加异常处理，设备重启后主动向服务器获取新的配置，服务器在异常出现的时候，把配置写入数据库等待设备主动获取 
    3. 方案3：【双向同步：触发式同步更新数据】 设备80修改的时候主动退给服务器；服务器提供刷新按钮主动获取设备的配置信息 
        ```sh
        # 历史问题：配置的颗粒的问题。直接更新替换整个文件。
        # 依赖于这配置文件的其他程序的同步功能是否完善。 【引发思考: 汇聚结点的功能闭环，功能拓展点和边界】
        ```























