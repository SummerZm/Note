## **基本规则**

### **名词解析**
- 设计规则：必须是准确，详尽，良好定义，以便能被客观的检验。
- 指导方针：更具抽象特性的建议。可以存在例外。

### **设计规则**
- **成员数据访问：**成员数据变量必须是私有的。【确保基类实现的变化独立于任何派生类】
- **全局数据：**避免在文件作用域内包含具有外部链接的数据。
    1. 用静态类将数据变量包裹起来，并且提供静态访问方法。
    2. 解决问题：a.散乱的数据变量污染全局命名空间。 b.通过静态成员函数访问静态数据成员提供了变化的弹性。
- **自由函数：**在头文件的文件作用域内，避免使用自由函数(运算函数除外)；在c文件中避免使用带有外部链接的自由函数(包括运算符函数)。
    1. 目的：避免污染全局命名空间。
    2. 解决案例：
        ```c
        // 方法：自由函数声明为静态并用具有外部链接属性的struct声明包含起来。
        // 效果：分组归类；暴露单一的systil，比暴露一整组函数更好。
        struct systil {
            static void setTime(time_t);
            static void setRandomSeed(size_t);
        }
        // 备注：自由运算符函数不能嵌入systil类中。但他们一般具有用户自定义类型，往往都能在编译时报错，影响不大。
        ```
- **枚举，typedef，常量数据放在头文件的函数作用域里**
    1. 目的：避免污染全局命名空间。同时便于查找相关变量声明位置。
    2. 解决：将这些放在对应的类型定义中去。
    3. 补充：宏定义在C++的头文件中竭力避免。目前合理可用的是：包含哨兵和宏编译。
    4. 补充：包含

- **头文件中的名称**
    1. 只有类，结构，联合，和自由运算符函数的声明可以出现在头文件中
    2. 只有类，结构，联合，和内联函数的定义可以出现在头文件中

- **包含卫哨和冗余包含卫哨**
    1. 包含卫哨：防止头文件循环重复包含，直接报错。
    2. 冗余包含卫哨：防止高密度的循环包含图损耗性能，降低效率。
        ```c
        #ifndef _SCREEN_H_  // 包含卫哨.
        #define _SCREEN_H_
        #include <sreen.h>

        #ifndef _WINDOW1_H_ // 冗余包含卫哨形式1 - 用于 window1.h 中有定义宏 _WINDOW1_H_.
        #include <window1.h>
        #endif

        #ifndef _WINDOW2_H_
        #include <window2.h>
        #endif

        #ifndef _WINDOW3_H_
        #include <window3.h>
        #endif

        #ifndef _MATH_H_     // 冗余包含卫哨形式2 - 用于 math.h 中没有定义宏 _MATH_H_.
        #include <math.h>
        #define _MATH_H_
        #endif
        // 虽然这种写法会让头文件，变得难看。但对于大型工程，预处理效率的提升是指数型.
        #endif 
        ```


