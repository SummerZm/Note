## **物理层次结构**
> **良好的物理设计便于测试，开发理解，性能提升.**

### **测试接口困难**
- **回归测试**
    1. 回归测试：在每个版本发布之前获得的新结果与原来的结果进行比较。
    2. 干扰回归测试的因素
        ```sh
        # A. 代码里的启发式技术：在有限时间内获取足够好的结果并不是最好的结果，启发方式条件不一样，产出不一样，不利于回归测试。
        # B. 异步通信系统有关完全不可预测的行为也会不利回归测试。
        ```
    3. 易测试性设计
        ```sh
        # 将一个组合类的各个部件类打散在组件的不同的物理层次上，有利于对各个部件类进行测试
        ```

- **分层测试**
    1. 非循环物理依赖：一个系统中的组件依赖只要是非循环的，就存在一个测试改系统的合理顺序。

    2. 在软件中使用层次号
        ```sh
        # 0. 层次化这一术语适用于物理实体而不是逻辑实体。
        # 1. 每个有向非循环图都可被赋予唯一的层次号；一个有循环的图（在电子电路中往往是指有反馈的电路图）则不能。
        # 2. 一个可被赋予唯一的层次号的物理依赖图称为是可层次化的。
        # 3. 软件层次号的接收：
        #       层次0. 在我们软件包之外的组件
        #       层次1. 一个没有局部物理依赖的组件
        #       层次N. 一个组件，他在物理上依赖于层次N-1上
        #
        #     一个层次号为1的组件，如果只依赖于编译器提供的库，这样的组件称为叶子组件. 总是可以对叶子组件进行隔离测试。
        # 4. 不是所有的分层设计的子系统都是可重用的，不是所有的设计都是可层次化的.
        # 5. 一个设计是否可层次化不能从一个逻辑图中明显地看出
        ```

- **增量测试**
    1. 当系统层次越来越复杂时，一次完整分层测试将会花费很多时间，这时只对新增的功能测试称为增量测试。

- **总结**
    1. 在隔离的情况下测试所以叶子组件
    2. 测试所有高层的组件时假设他们所依赖的低层次组件是内部正确的
    3. 增量式，分层次的策略使得我们能将测试工作集中于它能做得最好的地方，避免冗余测试。
    4. 完全的回归测试是昂贵但也是必需的，建立彻底的回归测试的适当时件很重要。时间太早则各组件还不稳变动，改动多；会浪费一些测试工作。
    5. 累积组件依赖(CCD) 提供了一种与增量式测试一个给定子系统相关的整体连接时开销的粗略数值度量。
    6. 平均组件依赖是指一个子系统的CCD与系统中的组件数量N的比值： ACD = CCD(子系统)/N(子系统)。
    7. 循环物理依赖将使系统具有高CCD，使得系统缺乏灵活性和难以管理。











